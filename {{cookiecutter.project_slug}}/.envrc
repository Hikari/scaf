# read the secrets from 1Password 
# strip whitespace from the value 
export AWS_ACCESS_KEY_SES=$(op read "op://{{cookiecutter.project_name}}/AWS_ACCESS_KEY_SES/token")
export AWS_SECRET_KEY_SES=$(op read "op://{{cookiecutter.project_name}}/AWS_SECRET_KEY_SES/token")
export POSTGRES_PASSWORD=$(op read "op://{{cookiecutter.project_name}}/POSTGRES_DB/password")
export POSTGRES_USER=$(op read "op://{{cookiecutter.project_name}}/POSTGERS_DB/username")
# use sandbox host for secrets generation
export POSTGRES_HOST=db-rw
export DATABASE_URL=postgresql://${POSTGRES_USER}:${POSTGRES_PASSWORD}@${POSTGRES_HOST}/{{ cookiecutter.project_slug }}
export DJANGO_SECRET_KEY=$(op read "op://{{cookiecutter.project_name}}/DJANGO_SECRET_KEY/token")
{% if cookiecutter.use_sentry == 'y' %}
export SENTRY_DSN_BACKEND=$(op read "op://{{cookiecutter.project_name}}/SENTRY_DSN_BACKEND/token")
export SENTRY_DSN_FRONTEND=$(op read "op://{{cookiecutter.project_name}}/SENTRY_DSN_FRONTEND/token")
{% endif %}
